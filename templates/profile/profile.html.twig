{% extends 'layout.html.twig' %}
{% block stylesheets %}
	{{ parent() }}
	{{ encore_entry_link_tags('profile') }}
{% endblock %}
{% set title = 'Profil' %}

{% block title %}
	Profil
{% endblock %}

{% block body %}
	<p class="titleProfile text-center fs-1 fw-bold mt-5">Profil</p>
	<div class="profile card m-3 mt-5" style="max-width: 100%;">
		<div class="row g-0">
			<div class="col">
				{% if app.user.profileImageName %}
					<img src="{{ asset('uploads/userImages/' ~ app.user.profileImageName) }}" class="profileImg img-fluid rounded ms-4 mt-4" alt="{{ app.user.lastName }} {{ app.user.firstName }}"/>
				{% else %}
					<img src="{{ asset('build/images/profil.png') }}" class="profileImg img-fluid rounded ms-4 mt-4" alt="{{ app.user.lastName }} {{ app.user.firstName }}">
				{% endif %}
			</div>
			<div class="col">
				<div class="card-body">
					<h5 class="titleProfile card-title mt-3">Bonjour</h5>
					<p class="titleProfile card-text fs-1 fw-bold">{{ app.user.firstName }}!</p>
					<a class="block fs-5 text-primary" role="button" href="{{ path('app_edit')}}">
						<small class="text-muted">Modifier</small>
					</a>
				</div>
			</div>
		</div>
		<div class="row g-0">
			<div class="progress col-lg-6 mx-auto">
				<p class="progress-text fs-3">Progression</p>
				{% if tutorial.lessons|length > 0 %}
					<div class="progress-circle">
						<svg viewbox="0 0 36 36">
							<path class="bg-path" d="M 18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
							<path class="bar-path" style="stroke-dasharray: {{ (app.user.lessons|filter(lesson => lesson.tutorial == tutorial)|length / tutorial.lessons|length)*100 }} 100;" d="M 18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
						</svg>
						<span class="percentage">{{ (app.user.lessons|filter(lesson => lesson.tutorial == tutorial)|length / tutorial.lessons|length)*100|round }}%</span>
					</div>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
